<UserControl x:Class="TaskMaster.Views.NewTaskPopup"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <UserControl.Resources>
        <!-- Gradient Brushes -->
        <LinearGradientBrush x:Key="PurplePinkGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#7C3AED" Offset="0"/>
            <GradientStop Color="#EC4899" Offset="1"/>
        </LinearGradientBrush>

        <!-- Compact Input Style -->
        <Style x:Key="CompactTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#1F2937"/>
            <Setter Property="BorderBrush" Value="#374151"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="#7C3AED"/>
                </Trigger>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#EC4899"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Compact ComboBox Style -->
        <Style x:Key="CompactComboBox" TargetType="ComboBox">
            <Setter Property="Background" Value="#1F2937"/>
            <Setter Property="BorderBrush" Value="#374151"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="#7C3AED"/>
                </Trigger>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#EC4899"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Compact Primary Button -->
        <Style x:Key="CompactPrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PurplePinkGradient}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="MinWidth" Value="80"/>
            <Setter Property="Height" Value="32"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.9"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Opacity" Value="0.8"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Compact Ghost Button -->
        <Style x:Key="CompactGhostButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#D1D5DB"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="MinWidth" Value="60"/>
            <Setter Property="Height" Value="32"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#374151"/>
                    <Setter Property="Foreground" Value="#FFFFFF"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#4B5563"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <!-- Popup Content Card -->
    <Border Background="#1A1F2E" CornerRadius="16"
            BorderBrush="#7C3AED" BorderThickness="2"
            Width="400" Height="280">
        <Border.Effect>
            <DropShadowEffect ShadowDepth="0" Color="#7C3AED" Opacity="0.6" BlurRadius="32"/>
        </Border.Effect>

        <StackPanel Margin="32,24" VerticalAlignment="Center">
            <!-- Compact Header -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,18" HorizontalAlignment="Center">
                <TextBlock Text="âœ¨" FontSize="18" Margin="0,0,8,0" VerticalAlignment="Center"/>
                <TextBlock Text="Create New Task" FontSize="18" FontWeight="Bold"
                           Foreground="#FFFFFF" VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Project Selection -->
            <StackPanel Margin="0,0,0,14">
                <TextBlock Text="Project" FontWeight="SemiBold" Margin="0,0,0,4"
                           Foreground="#E5E7EB" FontSize="12"/>
                <ComboBox Name="ProjectComboBox"
                          ItemsSource="{Binding Projects}"
                          SelectedItem="{Binding SelectedProject}"
                          DisplayMemberPath="Name"
                          Style="{StaticResource CompactComboBox}"/>
            </StackPanel>

            <!-- Task Title -->
            <StackPanel Margin="0,0,0,14">
                <TextBlock Text="Task Title" FontWeight="SemiBold" Margin="0,0,0,4"
                           Foreground="#E5E7EB" FontSize="12"/>
                <TextBox Name="TitleTextBox"
                         Text="{Binding TaskTitle, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource CompactTextBox}"/>
            </StackPanel>

            <!-- Task Type -->
            <StackPanel Margin="0,0,0,20">
                <TextBlock Text="Task Type" FontWeight="SemiBold" Margin="0,0,0,4"
                           Foreground="#E5E7EB" FontSize="12"/>
                <ComboBox Name="TypeComboBox"
                          SelectedValue="{Binding TaskType}"
                          Style="{StaticResource CompactComboBox}">
                    <ComboBoxItem Content="ðŸš€ feature" IsSelected="True"/>
                    <ComboBoxItem Content="ðŸ› bug"/>
                    <ComboBoxItem Content="âœ¨ enhancement"/>
                    <ComboBoxItem Content="ðŸ§ª test"/>
                    <ComboBoxItem Content="ðŸ”§ refactor"/>
                </ComboBox>
            </StackPanel>

            <!-- Action Buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="Cancel" Name="CancelButton" Click="CancelButton_Click"
                        Style="{StaticResource CompactGhostButton}" Margin="0,0,12,0"/>
                <Button Content="âœ¨ Create Task" Name="CreateButton" Click="CreateButton_Click"
                        Style="{StaticResource CompactPrimaryButton}"
                        IsEnabled="{Binding CanCreateTask}"/>
            </StackPanel>
        </StackPanel>
    </Border>
</UserControl>